<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/loge1.css">
</head>

<body>
    <div class="logo">
        <img src="img/logo.gif" alt="">
    </div>
    <div class="main">
        <div><img src="https://cdn.ctfmall.com/path/denglulunbo129.jpg" alt=""></div>
        <div class="main-right">
            <div class="top">
                <span class="loge1">密码登录</span>
                <span class="loge2">动态密码</span>
            </div>
            <input class="use" type="text" placeholder="手机号码"><br>
            <input type="password" class="psw" placeholder="密码">
            <aside> <input style="width: 59%;" type="text" placeholder="请输入6位数字验证码"><input
                    style="width: 40%;height: 52px;" type="button" value="获取验证码"></aside>
            <button class="yanzh">点击按钮进行验证</button>
            <input style="width: 16px;" type="radio" class="mdl"><span> 7天内自动登录</span><br>
            <div class="redbtn">立即登录</div>
            <div class="newus">快速注册</div>
        </div>
        <div class="main-right">
            <div class="top">
                <span style="width: 100%;">加入周大福</span>
            </div>
            <input class="use" type="text" placeholder="手机号码"><br>
            <button class="yanzh">点击按钮进行验证</button>
            <input class="chak" style="width: 59%;" type="text" placeholder="请输入6位数字验证码"><input class="char"
                style="width: 40%;height: 52px;" type="button" value="获取验证码">
            <input class="npsw" type="password" placeholder="8-16位数字字母组合密码">
            <div class="redbtn">立即注册</div>
            <div class="newus">快速登录</div>
        </div>
    </div>
</body>
<script src="js/jquery.min.js"></script>
<script src="js/jquery_cookie.js"></script>
<script>
    $(".yanzh").click(function () {
        $(this).html("验证成功");
    })

    $(".loge2").click(function () {
        $(".loge2").css({ "color": "brown", "border-bottom": "1px solid #9E0028" });
        $(".loge1").css({ "color": "black", "border-bottom": "1px solid #d5d5d5" });
        $("aside").css({ "display": "block" })
        $(".psw").css({ "display": "none" })
    });
    $(".loge1").click(function () {
        $(".loge1").css({ "color": "brown", "border-bottom": "1px solid #9E0028" });
        $(".loge2").css({ "color": "black", "border-bottom": "1px solid #d5d5d5" });
        $("aside").css({ "display": "none" })
        $(".psw").css({ "display": "block" })
    });
    $(".newus").first().click(function () {
        $(".main-right").first().css({ "display": "none" });
        $(".main-right").last().css({ "display": "block" });
    });
    $(".newus").last().click(function () {
        $(".main-right").first().css({ "display": "block" });
        $(".main-right").last().css({ "display": "none" });
    });
    $("input").on({
        focus: function () { $(this).prop("placeholder", ""); }
    })

    $(".use").change(function () {
        let str = $(this).val();
        let reg = /^1(3|4|5|6|7|8|9)\d{9}$/;
        if (reg.test(str)) {
            str = str;
        }
        else {
            $(this).val('');
        }
    });
    $(".npsw").change(function () {
        let str = $(this).val();
        let reg = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/
        if (reg.test(str)) {
            str = str;
        }
        else {
            $(this).val('');
        }
    })
    $(".char").click(function () {
        $(".chak").val('436544');
    })
    $(".redbtn").last().click(
        function () {
            $.get("http://jx.xuzhixiang.top/ap/api/reg.php", {
                username: $(".use").last().val(),
                password: $(".npsw").val()
            },
                res => {
                    console.log(res);
                    if (res.code == 1) {
                        alert("注册成功")
                        location.reload();
                    } else {
                        alert("注册失败")
                    }
                }
            )
        }
    )
    $(".redbtn").first().click(
        function () {
            $.get("http://jx.xuzhixiang.top/ap/api/login.php", {

                username: $(".use").first().val(),
                password: $(".psw").val()
            },
                res => {
                    console.log(res);
                    if (res.code == 1) {
                        // alert(res.msg)
                        $.cookie('username', $(".use").first().val());
                        $.cookie('id', res.data.id);
                        $.cookie('token', res.data.token);
                        $(location).attr("href", "http://127.0.0.1:5500/dist/shouye.html")
                    } else {
                        alert(res.msg)
                    }

                }
            )
        }
    )
//     uid: "51089"
// token: "e59e9248405cc91923239e97780a33c4"

</script>

</html>